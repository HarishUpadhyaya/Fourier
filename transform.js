 
// let drawing = [createVector(234,260), createVector(232,260), createVector(231,260), createVector(230,260), createVector(230,259), createVector(228,259), createVector(227,258), createVector(226,257), createVector(225,257), createVector(224,257), createVector(223,257), createVector(222,256), createVector(221,255), createVector(220,255), createVector(219,254), createVector(218,254), createVector(217,253), createVector(216,253), createVector(215,252), createVector(214,251), createVector(214,251), createVector(213,250), createVector(212,250), createVector(212,250), createVector(211,249), createVector(211,248), createVector(210,248), createVector(209,247), createVector(209,246), createVector(207,246), createVector(207,245), createVector(205,244), createVector(204,243), createVector(202,241), createVector(201,240), createVector(198,238), createVector(195,235), createVector(194,234), createVector(191,232), createVector(190,230), createVector(189,229), createVector(188,227), createVector(188,226), createVector(186,224), createVector(185,222), createVector(184,220), createVector(183,217), createVector(181,215), createVector(180,214), createVector(180,211), createVector(179,210), createVector(179,209), createVector(178,206), createVector(176,204), createVector(174,201), createVector(174,200), createVector(173,199), createVector(172,196), createVector(171,195), createVector(171,194), createVector(170,192), createVector(169,190), createVector(169,189), createVector(168,187), createVector(168,186), createVector(167,185), createVector(166,184), createVector(165,182), createVector(165,181), createVector(164,180), createVector(163,178), createVector(162,176), createVector(161,174), createVector(161,173), createVector(160,173), createVector(159,171), createVector(159,170), createVector(158,169), createVector(158,169), createVector(158,168), createVector(158,167), createVector(158,166), createVector(158,165), createVector(158,165), createVector(159,162), createVector(160,162), createVector(161,160), createVector(163,158), createVector(164,157), createVector(166,155), createVector(168,153), createVector(169,152), createVector(171,151), createVector(172,151), createVector(172,151), createVector(175,151), createVector(176,151), createVector(177,151), createVector(179,151), createVector(180,151), createVector(181,151), createVector(183,151), createVector(186,153), createVector(189,154), createVector(190,154), createVector(195,155), createVector(198,156), createVector(201,157), createVector(202,158), createVector(204,159), createVector(206,160), createVector(209,161), createVector(211,162), createVector(215,164), createVector(218,165), createVector(219,166), createVector(222,167), createVector(223,168), createVector(224,169), createVector(226,170), createVector(228,171), createVector(230,173), createVector(231,174), createVector(232,175), createVector(233,175), createVector(234,176), createVector(235,177), createVector(236,178), createVector(237,179), createVector(240,181), createVector(241,183), createVector(242,184), createVector(244,186), createVector(245,187), createVector(246,188), createVector(247,188), createVector(247,187), createVector(248,186), createVector(251,183), createVector(252,182), createVector(253,181), createVector(254,180), createVector(255,179), createVector(256,178), createVector(257,177), createVector(258,175), createVector(260,172), createVector(262,170), createVector(263,169), createVector(266,166), createVector(268,164), createVector(269,163), createVector(272,160), createVector(274,158), createVector(276,157), createVector(278,155), createVector(280,153), createVector(283,150), createVector(286,149), createVector(287,148), createVector(290,147), createVector(293,145), createVector(295,144), createVector(296,144), createVector(299,143), createVector(300,143), createVector(305,143), createVector(306,143), createVector(307,143), createVector(310,143), createVector(311,143), createVector(312,143), createVector(313,143), createVector(316,143), createVector(317,144), createVector(318,145), createVector(319,146), createVector(322,147), createVector(323,148), createVector(324,149), createVector(325,150), createVector(326,151), createVector(327,152), createVector(328,153), createVector(329,154), createVector(329,155), createVector(331,157), createVector(331,159), createVector(331,161), createVector(331,162), createVector(331,164), createVector(330,167), createVector(330,169), createVector(330,171), createVector(329,175), createVector(328,177), createVector(328,179), createVector(325,182), createVector(325,184), createVector(324,186), createVector(323,188), createVector(321,192), createVector(320,195), createVector(319,199), createVector(317,202), createVector(315,206), createVector(314,208), createVector(313,210), createVector(311,213), createVector(310,215), createVector(309,217), createVector(309,219), createVector(308,221), createVector(306,224), createVector(304,227), createVector(302,230), createVector(301,231), createVector(300,232), createVector(299,232), createVector(295,234), createVector(293,236), createVector(291,237), createVector(290,238), createVector(286,241), createVector(284,245), createVector(281,247), createVector(277,250), createVector(274,252), createVector(271,255), createVector(270,256), createVector(269,257), createVector(266,259), createVector(265,260), createVector(261,262), createVector(260,263), createVector(258,265), createVector(257,265), createVector(256,266), createVector(255,266), createVector(254,266), createVector(253,267), createVector(253,267), createVector(252,268), createVector(251,269), createVector(250,269), createVector(250,270), createVector(249,271), createVector(248,271), createVector(248,271), createVector(247,271), createVector(247,271), createVector(246,270), createVector(245,269), createVector(244,269), createVector(243,268), createVector(243,268), createVector(241,267), createVector(240,267), createVector(240,266), createVector(238,265), createVector(237,264), createVector(235,263), createVector(233,262), createVector(232,261), createVector(231,260), createVector(230,260), createVector(229,259), createVector(228,258), createVector(227,257), createVector(225,256)];

// function preload() {
// 	for (let i = 0; i < drawing.length; i+=10) {
// 		x.push(new Complex(drawing[i].x, drawing[i].y));
// 	}
// }

//let x = [100,100,100,100,100,100,100,100, 0,0,0,0,0,0,0,  100,100,100,100,100,100,100,100, 0,0,0,0,0,0,0, 100,100,100,100,100,100,100,100, 0,0,0,0,0,0,0, 100,100,100,100,100,100,100,100, 0,0,0,0,0,0,0, 100,100,100,100,100,100,100,100,];
let x = [];
let fourierX; 
let time = 0; 
let path = [];


// Lorentz boi 

let xL = 0.01;
let yL = 0;
let zL = 0;

let a = 10;
let b = 28;
let c = 8.0 / 3.0;

function setup() {
	createCanvas(windowWidth,windowHeight);
	const skip = 12; 
	// for (let i = 0; i < 200; i++) {
	// 	const c = new Complex(random(i,i+50), random(i+4,i+44));
	// 	x.push(c);
	// }
	//let drawing = [createVector(234,0), createVector(232,260), createVector(231,260), createVector(230,260), createVector(230,259), createVector(228,259), createVector(227,258), createVector(226,257), createVector(225,257), createVector(224,257), createVector(223,257), createVector(222,256), createVector(221,255), createVector(220,255), createVector(219,254), createVector(218,254), createVector(217,253), createVector(216,253), createVector(215,252), createVector(214,251), createVector(214,251), createVector(213,250), createVector(212,250), createVector(212,250), createVector(211,249), createVector(211,248), createVector(210,248), createVector(209,247), createVector(209,246), createVector(207,246), createVector(207,245), createVector(205,244), createVector(204,243), createVector(202,241), createVector(201,240), createVector(198,238), createVector(195,235), createVector(194,234), createVector(191,232), createVector(190,230), createVector(189,229), createVector(188,227), createVector(188,226), createVector(186,224), createVector(185,222), createVector(184,220), createVector(183,217), createVector(181,215), createVector(180,214), createVector(180,211), createVector(179,210), createVector(179,209), createVector(178,206), createVector(176,204), createVector(174,201), createVector(174,200), createVector(173,199), createVector(172,196), createVector(171,195), createVector(171,194), createVector(170,192), createVector(169,190), createVector(169,189), createVector(168,187), createVector(168,186), createVector(167,185), createVector(166,184), createVector(165,182), createVector(165,181), createVector(164,180), createVector(163,178), createVector(162,176), createVector(161,174), createVector(161,173), createVector(160,173), createVector(159,171), createVector(159,170), createVector(158,169), createVector(158,169), createVector(158,168), createVector(158,167), createVector(158,166), createVector(158,165), createVector(158,165), createVector(159,162), createVector(160,162), createVector(161,160), createVector(163,158), createVector(164,157), createVector(166,155), createVector(168,153), createVector(169,152), createVector(171,151), createVector(172,151), createVector(172,151), createVector(175,151), createVector(176,151), createVector(177,151), createVector(179,151), createVector(180,151), createVector(181,151), createVector(183,151), createVector(186,153), createVector(189,154), createVector(190,154), createVector(195,155), createVector(198,156), createVector(201,157), createVector(202,158), createVector(204,159), createVector(206,160), createVector(209,161), createVector(211,162), createVector(215,164), createVector(218,165), createVector(219,166), createVector(222,167), createVector(223,168), createVector(224,169), createVector(226,170), createVector(228,171), createVector(230,173), createVector(231,174), createVector(232,175), createVector(233,175), createVector(234,176), createVector(235,177), createVector(236,178), createVector(237,179), createVector(240,181), createVector(241,183), createVector(242,184), createVector(244,186), createVector(245,187), createVector(246,188), createVector(247,188), createVector(247,187), createVector(248,186), createVector(251,183), createVector(252,182), createVector(253,181), createVector(254,180), createVector(255,179), createVector(256,178), createVector(257,177), createVector(258,175), createVector(260,172), createVector(262,170), createVector(263,169), createVector(266,166), createVector(268,164), createVector(269,163), createVector(272,160), createVector(274,158), createVector(276,157), createVector(278,155), createVector(280,153), createVector(283,150), createVector(286,149), createVector(287,148), createVector(290,147), createVector(293,145), createVector(295,144), createVector(296,144), createVector(299,143), createVector(300,143), createVector(305,143), createVector(306,143), createVector(307,143), createVector(310,143), createVector(311,143), createVector(312,143), createVector(313,143), createVector(316,143), createVector(317,144), createVector(318,145), createVector(319,146), createVector(322,147), createVector(323,148), createVector(324,149), createVector(325,150), createVector(326,151), createVector(327,152), createVector(328,153), createVector(329,154), createVector(329,155), createVector(331,157), createVector(331,159), createVector(331,161), createVector(331,162), createVector(331,164), createVector(330,167), createVector(330,169), createVector(330,171), createVector(329,175), createVector(328,177), createVector(328,179), createVector(325,182), createVector(325,184), createVector(324,186), createVector(323,188), createVector(321,192), createVector(320,195), createVector(319,199), createVector(317,202), createVector(315,206), createVector(314,208), createVector(313,210), createVector(311,213), createVector(310,215), createVector(309,217), createVector(309,219), createVector(308,221), createVector(306,224), createVector(304,227), createVector(302,230), createVector(301,231), createVector(300,232), createVector(299,232), createVector(295,234), createVector(293,236), createVector(291,237), createVector(290,238), createVector(286,241), createVector(284,245), createVector(281,247), createVector(277,250), createVector(274,252), createVector(271,255), createVector(270,256), createVector(269,257), createVector(266,259), createVector(265,260), createVector(261,262), createVector(260,263), createVector(258,265), createVector(257,265), createVector(256,266), createVector(255,266), createVector(254,266), createVector(253,267), createVector(253,267), createVector(252,268), createVector(251,269), createVector(250,269), createVector(250,270), createVector(249,271), createVector(248,271), createVector(248,271), createVector(247,271), createVector(247,271), createVector(246,270), createVector(245,269), createVector(244,269), createVector(243,268), createVector(243,268), createVector(241,267), createVector(240,267), createVector(240,266), createVector(238,265), createVector(237,264), createVector(235,263), createVector(233,262), createVector(232,261), createVector(231,260), createVector(230,260), createVector(229,259), createVector(228,258), createVector(227,257), createVector(225,256)];

	//let drawing = [createVector(179, 300),createVector(189, 294),createVector(199, 286),createVector(210, 279),createVector(217, 276),createVector(231, 267),createVector(250, 256),createVector(275, 244),createVector(281, 239),createVector(211, 256),createVector(213, 246),createVector(216, 236),createVector(219, 227),createVector(226, 215),createVector(235, 202),createVector(248, 187),createVector(257, 178),createVector(264, 171),createVector(268, 169),createVector(273, 175),createVector(273, 180),createVector(273, 187),createVector(273, 194),createVector(274, 200),createVector(275, 209),createVector(276, 217),createVector(279, 216),createVector(282, 210),createVector(286, 201),createVector(293, 186),createVector(299, 175),createVector(310, 160),createVector(324, 149),createVector(336, 140),createVector(338, 147),createVector(338, 159),createVector(338, 171),createVector(337, 180),createVector(335, 191),createVector(335, 196),createVector(336, 197),createVector(346, 195),createVector(373, 187),createVector(396, 180),createVector(406, 178),createVector(410, 178),createVector(413, 178),createVector(410, 185),createVector(405, 190),createVector(398, 195),createVector(390, 199),createVector(384, 203),createVector(377, 207),createVector(367, 212),createVector(361, 215),createVector(354, 221),createVector(372, 226),createVector(386, 227),createVector(398, 232),createVector(408, 235),createVector(413, 237),createVector(414, 240),createVector(405, 241),createVector(396, 243),createVector(386, 243),createVector(372, 243),createVector(366, 243),createVector(352, 243),createVector(343, 243),createVector(335, 243),createVector(330, 243),createVector(323, 243),createVector(332, 252),createVector(340, 258),createVector(348, 261),createVector(361, 266),createVector(371, 267),createVector(379, 270),createVector(384, 271),createVector(371, 286),createVector(366, 287),createVector(360, 287),createVector(351, 287),createVector(336, 287),createVector(323, 286),createVector(305, 284),createVector(293, 283),createVector(290, 283),createVector(286, 283),createVector(281, 281),createVector(271, 281),createVector(262, 281),createVector(257, 281),createVector(252, 280),createVector(248, 280),createVector(241, 281),createVector(234, 283),createVector(229, 285),createVector(383, 275),createVector(383, 278),createVector(381, 281),createVector(376, 285),createVector(371, 285),createVector(212, 272),createVector(211, 267),createVector(210, 262),createVector(210, 259),createVector(210, 256),createVector(286, 239),createVector(289, 238),createVector(294, 237),createVector(299, 235),createVector(304, 233),createVector(312, 229),createVector(318, 227),createVector(326, 223),createVector(331, 220),createVector(335, 218),createVector(339, 216),createVector(305, 222),createVector(307, 217),createVector(308, 209),createVector(310, 205),createVector(312, 200),createVector(313, 194),createVector(313, 190),createVector(316, 182),createVector(317, 176),createVector(318, 170),createVector(321, 165),createVector(246, 242),createVector(249, 232),createVector(251, 227),createVector(252, 222),createVector(254, 217),createVector(255, 210),createVector(256, 206),createVector(261, 260),createVector(265, 262),createVector(272, 263),createVector(282, 267),createVector(295, 271),createVector(307, 273),createVector(319, 277),createVector(326, 279),createVector(341, 282),createVector(351, 282),createVector(355, 281),createVector(357, 279),createVector(336, 230),createVector(339, 230),createVector(342, 230),createVector(346, 232),createVector(351, 233),createVector(355, 234),createVector(361, 234),createVector(366, 234),createVector(370, 234)];
	

	// let drawing = [createVector(142, 302), createVector(149, 297), createVector(155, 292), createVector(161, 288), createVector(167, 285), createVector(170, 282), createVector(174, 279), createVector(178, 276), createVector(180, 272), createVector(180, 269), createVector(180, 266), createVector(180, 262), createVector(179, 257), createVector(179, 253), createVector(178, 248), createVector(178, 242), createVector(178, 237), createVector(177, 228), createVector(175, 223), createVector(176, 219), createVector(177, 214), createVector(180, 207), createVector(184, 199), createVector(187, 190), createVector(194, 179), createVector(199, 173), createVector(201, 171), createVector(202, 173), createVector(203, 176), createVector(204, 181), createVector(206, 186), createVector(207, 192), createVector(207, 198), createVector(210, 205), createVector(211, 210), createVector(213, 213), createVector(216, 216), createVector(219, 222), createVector(223, 226), createVector(225, 225), createVector(228, 218), createVector(228, 214), createVector(229, 207), createVector(230, 202), createVector(232, 197), createVector(236, 187), createVector(239, 178), createVector(246, 166), createVector(251, 157), createVector(255, 153), createVector(258, 151), createVector(262, 148), createVector(266, 147), createVector(271, 144), createVector(270, 148), createVector(269, 150), createVector(269, 155), createVector(269, 160), createVector(271, 167), createVector(271, 172), createVector(272, 177), createVector(273, 182), createVector(274, 188), createVector(280, 202), createVector(282, 202), createVector(283, 198), createVector(288, 193), createVector(292, 187), createVector(297, 181), createVector(302, 178), createVector(307, 176), createVector(316, 170), createVector(324, 167), createVector(333, 164), createVector(341, 160), createVector(350, 157), createVector(357, 155), createVector(365, 153), createVector(369, 153), createVector(375, 153), createVector(379, 153), createVector(378, 156), createVector(376, 160), createVector(373, 163), createVector(367, 169), createVector(360, 176), createVector(354, 181), createVector(348, 188), createVector(343, 194), createVector(340, 199), createVector(334, 206), createVector(327, 213), createVector(324, 219), createVector(321, 224), createVector(319, 226), createVector(324, 229), createVector(332, 231), createVector(343, 232), createVector(352, 232), createVector(360, 232), createVector(367, 233), createVector(373, 235), createVector(376, 238), createVector(374, 241), createVector(369, 245), createVector(360, 248), createVector(347, 252), createVector(338, 254), createVector(324, 254), createVector(318, 254), createVector(302, 254), createVector(284, 254), createVector(288, 257), createVector(292, 259), createVector(300, 262), createVector(311, 264), createVector(320, 268), createVector(329, 273), createVector(335, 280), createVector(332, 283), createVector(325, 284), createVector(320, 284), createVector(313, 284), createVector(304, 282), createVector(293, 280), createVector(279, 275), createVector(266, 271), createVector(255, 270), createVector(246, 268), createVector(239, 270), createVector(235, 276), createVector(228, 287), createVector(224, 292), createVector(220, 293), createVector(208, 296), createVector(199, 296), createVector(192, 298), createVector(186, 301), createVector(183, 304), createVector(180, 307), createVector(181, 312), createVector(186, 317), createVector(193, 321), createVector(204, 326), createVector(213, 330), createVector(228, 332), createVector(254, 334), createVector(288, 339), createVector(349, 333), createVector(371, 325), createVector(368, 326), createVector(362, 329), createVector(356, 332), createVector(351, 333), createVector(347, 335), createVector(342, 335), createVector(329, 335), createVector(314, 338), createVector(300, 338), createVector(288, 338), createVector(274, 338), createVector(259, 336), createVector(241, 333), createVector(225, 330), createVector(236, 331), createVector(257, 331), createVector(269, 331), createVector(285, 333), createVector(296, 334), createVector(307, 335), createVector(321, 336), createVector(335, 336), createVector(350, 335), createVector(364, 323), createVector(376, 316), createVector(383, 310), createVector(389, 304), createVector(394, 294), createVector(398, 283), createVector(404, 269), createVector(409, 257), createVector(416, 239), createVector(419, 227), createVector(422, 216), createVector(427, 203), createVector(428, 188), createVector(429, 172), createVector(429, 159), createVector(424, 143), createVector(423, 131), createVector(419, 117), createVector(413, 102), createVector(182, 105), createVector(175, 110), createVector(165, 117), createVector(158, 123), createVector(153, 129), createVector(148, 135), createVector(143, 142), createVector(135, 156), createVector(129, 168), createVector(121, 184), createVector(118, 196), createVector(115, 201), createVector(115, 211), createVector(115, 226), createVector(115, 243), createVector(115, 264), createVector(114, 286), createVector(114, 300), createVector(114, 307), createVector(118, 314), createVector(126, 319), createVector(139, 319) ]; 
	// for (let i = 0; i < drawing.length; i+=10) {
	// 	x.push(new Complex(drawing[i].x, drawing[i].y));
	// }

	// Lorentz boi 
	for (let i = 0; i < 600; i++) {
  		let de_t = 0.01;
  		let dx = (a * (yL - xL)) * de_t;
  		let dy = (xL * (b - zL) - yL) * de_t;
  		let dz = (xL * yL - c * zL) * de_t;
  		xL = xL + dx;
  		yL = yL + dy;
  		zL = zL + dz;
  		
  		x.push(new Complex(7*xL,7*yL));
	}

	fourierX = dft(x);
	fourierX.sort((a,b) => b.amp - a.amp);
}

function epicycles(x,y,rotation,fourier) {
	for (let i = 0; i < fourier.length; i++) {
		let prevx = x; 
		let prevy = y;
		let freq = fourier[i].freq;
		let radius = fourier[i].amp;
		let phase = fourier[i].phase;
		x += radius * cos(freq * time + phase + rotation);
		y += radius * sin(freq * time + phase +rotation);

		stroke(255,100);
		noFill();
		ellipse(prevx, prevy, radius*2);
		stroke(255,175);
		line(prevx, prevy, x, y);
	}

	return createVector(x,y);
}

function draw() {
	background(0);
	// translate(width/2,height/2);

	let v = epicycles(width/2,height/2,0,fourierX);
	path.unshift(v);

	beginShape();
	stroke(255,255,0);
	strokeWeight(2);
	noFill();
	for (let i = 0; i < path.length; i++) {
		vertex(path[i].x, path[i].y);
	}
	endShape();

	const dt = TWO_PI / fourierX.length;
	time += dt;

	if(time > TWO_PI) {
		time = 0; 
		path = [];
	}
}